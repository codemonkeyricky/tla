% \documentclass[draft]{report}

\RequirePackage{luatex85}% TeXLive 2017 fix for \geometry
\documentclass{kdp}
\usepackage{geometry}

% \usepackage{algorithm}% http://ctan.org/pkg/algorithms
\usepackage{algpseudocode}% http://ctan.org/pkg/algorithmicx
% \usepackage{algorithm}% http://ctan.org/pkg/algorithms
% \usepackage{algpseudocode}
\usepackage{tlatex}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{comment}
\usepackage{fancyhdr}
\usepackage{amssymb}
\usepackage{inputenc}
\usepackage{svg}
\usepackage{framed}

\usepackage{tikz}
\usetikzlibrary{automata, positioning, arrows}

% \usepackage{hyperref}
% \hypersetup{
%     colorlinks,
%     citecolor=black,
%     filecolor=black,
%     linkcolor=black,
%     urlcolor=black
% }

% !TeX spellcheck = en_GB 

% Configure fancyhdr
\pagestyle{fancy}
\fancyhf{} % Clear default header and footer

% Header settings
\fancyhead[L]{\nouppercase{\leftmark}} % Chapter number and title on the left
% \fancyhead[C]{Center Header}    % Centered header
\fancyhead[R]{\thepage}     % Right-aligned header

% Footer settings
% \fancyfoot[L]{Left Footer}      % Left-aligned footer
% \fancyfoot[C]{Page \thepage}    % Centered footer with page number
% \fancyfoot[R]{Right Footer}     % Right-aligned footer

% java -cp /home/richard/dev/tla2tex/tla2tools.jar  tla2tex.TeX  book.tex 

\lstset { %
    language=C++,
    backgroundcolor=\color{black!5}, % set backgroundcolor
    basicstyle=\footnotesize,% basic font setting
}

\title{\textit{Correct by Design} with TLA+ \\ Early Preview}

% \maketitle



\author{Richard Tang}
\date{\today}
\begin{document}
\maketitle

% \vspace{1cm} % Adjust spacing as needed
% \begin{center}
% \textbf{First Draft}
% \end{center}

\section*{Acknowledgement}

A big thanks to Anthony Giardina for reviewing the content of this book.

\tableofcontents

\part{Introduction}

\include{intro}

\include{primer}

\part{Examples with TLA+}

TLA+ notation is rooted in temporal logic and doesn't share the usual
programming language \textit{look and feel}. Despite the possibly foreign look,
the core language semantics for TLA+ is reasonably constrained. This allows
anyone with some programming experience to pick up relatively quickly. \\

This section provides a few example TLA+ spec with increasing complexity, easing
the readers into this wonderful tool.

% \include{blinking}

\include{dining}

\include{scc}

\include{scheduler}

\include{gossip}

\include{sack}

\include{torrent}

\include{consistent}

\include{raft}

\part{Examples with PlusCal}

PlusCal is a C-like syntax that allows designer to describe their \textit{Spec}
in a more programming language like fashion. I'm of the opinion that these are
suitable to describe concurrent algorithm, where the code execution between
multiple contexts may interleave in any way imaginable. While it certainly is
possible to express these in TLA+ directly, I find it to be error-prone,
somewhat comparable to writing in Assembly instead of C. In this section we will
describe a few PlusCal example.

\include{spsc}

\include{spmc}

\part{System Modeling}

The previous parts covers mostly targeted applications. In this section, we will
explore using TLA+ to model and characterize system behaviors. Examples in this
part will focus on system modeling, and in some cases state graph will be too
large traverse exhaustively in practical time. Instead of reducing the model to
allow the specification run in finite time, we will run the model checker in
generation mode, so we can observe system behavior and collect statistical
samples.

\include{lru}

\include{dropbox}

\part{Reference}

\include{fairness}

\include{liveness}

\include{general}

\include{lang}

\include{reference}

\end{document}

