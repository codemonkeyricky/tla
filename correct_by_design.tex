% \documentclass[draft]{report}

\RequirePackage{luatex85}% TeXLive 2017 fix for \geometry
\documentclass{kdp}
\usepackage{geometry}

\usepackage{tlatex}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{comment}
\usepackage{fancyhdr}
\usepackage{amssymb}
\usepackage{inputenc}
\usepackage{svg}
\usepackage{framed}

\usepackage{tikz}
\usetikzlibrary{automata, positioning, arrows}


% !TeX spellcheck = en_GB 

% Configure fancyhdr
\pagestyle{fancy}
\fancyhf{} % Clear default header and footer

% Header settings
\fancyhead[L]{\nouppercase{\leftmark}} % Chapter number and title on the left
% \fancyhead[C]{Center Header}    % Centered header
\fancyhead[R]{\thepage}     % Right-aligned header

% Footer settings
% \fancyfoot[L]{Left Footer}      % Left-aligned footer
% \fancyfoot[C]{Page \thepage}    % Centered footer with page number
% \fancyfoot[R]{Right Footer}     % Right-aligned footer

% java -cp /home/richard/dev/tla2tex/tla2tools.jar  tla2tex.TeX  book.tex 

\lstset { %
    language=C++,
    backgroundcolor=\color{black!5}, % set backgroundcolor
    basicstyle=\footnotesize,% basic font setting
}

\title{\textit{Correct by Design} with TLA+ \\ Early Preview}

% \maketitle



\author{Richard Tang}
\date{\today}
\begin{document}
\maketitle

% \vspace{1cm} % Adjust spacing as needed
% \begin{center}
% \textbf{First Draft}
% \end{center}

\tableofcontents

\part{Introduction}

\include{intro}

\include{primer}

\part{Examples with TLA+}

% \include{blinking}

\include{gossip}

\include{scheduler}

\include{sack}

\include{raft}

\part{Examples with PlusCal}

PlusCal is a C-like syntax that allows designer to describe their \textit{Spec}
in a more programming language like fashion. I'm of the opinion that these are
suitable to describe concurrent algorithm, where the code execution between
multiple contexts may interleave in any way imaginable. While it certainly is
possible to express these in TLA+ directly, I find it to be error prone,
somewhat comparable to writing in Assembly instead of C. In this section we will
describe a few PlusCal example.

\include{spsc}

\include{spmc}

\part{Reference}

\include{lang}

\include{fairness}

\include{liveness}

\include{general}

\include{reference}

\end{document}

